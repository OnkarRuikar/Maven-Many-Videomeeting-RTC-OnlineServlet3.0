<!DOCTYPE html>
<html>
<head>
<title>Plain webRTC</title>
<style type="text/css">
.sent {
	color: blue;
}

button {
	display: block;
}
</style>
</head>
<body>
	<h1>Video Chatroom</h1>
	<script src="room.js"></script>
	<script type="text/javascript">
		var m = new Room("stun:stun.l.google.com:19302");
		m.addOnSessionIncomming(function(sessionId, oleRecipient) {
			var v = document.createElement('video');
			v.setAttribute('id', 'v' + sessionId)
			v.setAttribute('width', 250);
			v.setAttribute('autoplay', '');
			v.setAttribute('title', sessionId);
			v.setAttribute('style', 'border:1px solid black;');
			document.body.appendChild(v);
			oleRecipient.addOnStreamEventsChangedHandler(function(streamEvents){
				console.log(streamEvents);
				v.srcObject = streamEvents[0].stream;
			})
		});
		m.addOnSessionOutgoing(sessionId=>{
			console.log("outgoing:",sessionId);
			var v = document.getElementById('v'+sessionId);
			v.remove();
		});
	</script>
	Click <a href="meet" target="_blank">here</a> to open statistics in a new tab.
	<p>Here are the opposite audio/video-streams: </p>
</body>
</html>